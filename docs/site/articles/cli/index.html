<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Command Line Reference</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

    html {
      box-sizing: border-box;
      font-size: 100%;
    }

    *, *:before, *:after {
      box-sizing: inherit;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: Nunito, Arial, sans-serif;
      font-size: 1.1rem;
      line-height: 1.75;
      background: #fff;
      color: #111;

      /* Remove Pandoc's injected width restrictions */
      max-width: none !important;
      padding-left: 0 !important;
      padding-right: 0 !important;
      padding-top: 0 !important;
      padding-bottom: 0 !important;
    }

    .wrapper {
      display: flex;
      justify-content: center;
    }

    #page {
      max-width: 1240px;
      width: 100%;
      padding: 2rem 1rem;
    }

    h1, h2, h3, h4 {
      font-weight: bold;
      margin-top: 2rem;
      margin-bottom: 1rem;
      line-height: 1.4;
    }

    p {
      margin: 1.25rem 0;
    }

    img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 2rem auto;
    }

    pre {
      background: #f8f8f8;
      padding: 1rem;
      overflow-x: auto;
      border-radius: 6px;
    }

    code {
      font-family: SFMono-Regular, Consolas, monospace;
      background: #f5f5f5;
      padding: 0.2em 0.4em;
      border-radius: 4px;
    }

    blockquote {
      margin: 2rem 0;
      padding-left: 1rem;
      border-left: 4px solid #ddd;
      color: #666;
      font-style: italic;
    }

    .subtitle, .author, .date {
      color: #666;
      font-size: 0.9rem;
      margin-top: 0.5rem;
      text-align: center;
    }

    .doc-layout {
      display: block;
      margin-top: 1rem;
    }

    .doc-content {
      min-width: 0;
    }

    .doc-toc {
      margin: 1rem 0 1.5rem;
    }

    .doc-toc nav#TOC {
      margin: 0;
      padding: 1rem;
      border: 1px solid #e5e7ea;
      background: #fafafa;
      border-radius: 8px;
      overflow-x: auto;
    }

    nav#TOC h2 {
      margin-top: 0;
      margin-bottom: 0.75rem;
      font-size: 1rem;
    }

    nav#TOC ul {
      margin: 0;
      padding-left: 1.1rem;
      line-height: 1.45;
    }

    nav#TOC li {
      margin: 0.22rem 0;
    }

    nav#TOC a {
      color: #1f2937;
      text-decoration: none;
      font-weight: 500;
    }

    nav#TOC a:hover {
      text-decoration: underline;
    }

    figure {
      margin: 2rem auto;
      text-align: center;
    }

    figure img {
      width: 100%;
      height: auto;
      display: block;
      margin: 2rem auto;
    }

    figcaption {
      font-size: 0.9em;
      color: #555;
      margin-top: 0.75rem;
    }

    header#title-block-header {
      text-align: center;
    }

    #presence-link {
      margin: 3rem auto 0;
      padding: 1.25rem 1rem 1.5rem;
      text-align: center;
      font-size: 0.95rem;
      color: #444;
      border-top: 1px solid #e5e7ea;
      background: #f9f9f9;
      border-radius: 8px 8px 0 0;
    }

    #presence-link a {
      text-decoration: none;
      color: #222;
      font-weight: 600;
    }

    #presence-link a:hover {
      text-decoration: underline;
    }

    .site-nav {
      margin: 0 auto 2rem;
      padding: 0.75rem 1rem;
      background: #f6f7f8;
      border: 1px solid #e5e7ea;
      border-radius: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem 1.25rem;
      justify-content: center;
      font-size: 0.98rem;
    }

    .site-nav a {
      color: #222;
      text-decoration: none;
      font-weight: 600;
      padding: 0.2rem 0.35rem;
    }

    .site-nav a:hover {
      text-decoration: underline;
    }


    @media screen and (min-width: 1024px) {
      body {
        font-size: 1.15rem;
      }

      #page {
        padding: 3rem 2rem;
      }
    }

    @media screen and (min-width: 1120px) {
      .doc-layout.has-toc {
        display: grid;
        grid-template-columns: minmax(240px, 290px) minmax(0, 1fr);
        gap: 2rem;
        align-items: start;
      }

      .doc-layout.has-toc .doc-toc {
        position: sticky;
        top: 1.25rem;
        max-height: calc(100vh - 2.5rem);
        overflow: auto;
        margin: 0;
        padding-right: 0.15rem;
      }

      .doc-layout.has-toc .doc-content {
        min-width: 0;
      }
    }

  </style>
  <script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
  type="text/javascript"></script>
</head>
<body>
  <div class="wrapper">
    <div id="page">
      <nav class="site-nav" aria-label="Primary">
        <a href="https://samplepath.pcalc.org/index.html">Home</a>
        <a href="https://samplepath.pcalc.org/articles/package-overview/index.html">Package Overview</a>
        <a href="https://samplepath.pcalc.org/articles/theory/index.html">Theory</a>
        <a href="https://samplepath.pcalc.org/articles/cli/index.html">Command Line</a>
        <a href="https://samplepath.pcalc.org/articles/chart-reference/index.html">Chart Reference</a>
        <a href="https://samplepath.pcalc.org/examples/README.html">Examples</a>
      </nav>
                  <header id="title-block-header">
        <h1 class="title"><strong>Command Line Reference</strong></h1>

        <p class="author"><p><a href="https://github.com/presence-calculus/samplepath"><em>The
Samplepath Analysis Toolkit</em></a></p></p>

              </header>
                  <div class="doc-layout has-toc">
                <aside class="doc-toc" aria-label="Contents">
          <nav id="TOC" role="doc-toc">
            <h2 id="toc-title">Contents</h2>
            <ul>
            <li><a href="#scope" id="toc-scope">1 Scope</a></li>
            <li><a href="#invocation" id="toc-invocation">2
            Invocation</a></li>
            <li><a href="#analyze-command" id="toc-analyze-command">3
            Analyze Command</a>
            <ul>
            <li><a href="#example" id="toc-example">3.1 Example</a></li>
            </ul></li>
            <li><a href="#input-contract" id="toc-input-contract">4
            Input Contract</a></li>
            <li><a href="#output-layout" id="toc-output-layout">5 Output
            Layout</a></li>
            <li><a href="#analysis-modes" id="toc-analysis-modes">6
            Analysis Modes</a>
            <ul>
            <li><a href="#event-indexed-mode-default"
            id="toc-event-indexed-mode-default">6.1 Event-Indexed Mode
            (default)</a></li>
            <li><a href="#calendar-indexed-mode"
            id="toc-calendar-indexed-mode">6.2 Calendar-Indexed
            Mode</a></li>
            </ul></li>
            <li><a href="#options" id="toc-options">7 Options</a>
            <ul>
            <li><a href="#csv-parsing" id="toc-csv-parsing">7.1 CSV
            Parsing</a></li>
            <li><a href="#data-filters" id="toc-data-filters">7.2 Data
            Filters</a></li>
            <li><a href="#outlier-trimming"
            id="toc-outlier-trimming">7.3 Outlier Trimming</a></li>
            <li><a href="#lambda-fine-tuning"
            id="toc-lambda-fine-tuning">7.4 Lambda Fine Tuning</a></li>
            <li><a href="#convergence-thresholds"
            id="toc-convergence-thresholds">7.5 Convergence
            Thresholds</a></li>
            <li><a href="#output-configuration"
            id="toc-output-configuration">7.6 Output
            Configuration</a></li>
            <li><a href="#chart-configuration"
            id="toc-chart-configuration">7.7 Chart
            Configuration</a></li>
            <li><a href="#export-configuration"
            id="toc-export-configuration">7.8 Export
            Configuration</a></li>
            </ul></li>
            <li><a href="#csv-exports" id="toc-csv-exports">8 CSV
            Exports</a>
            <ul>
            <li><a href="#flow-metrics-export"
            id="toc-flow-metrics-export">8.1 Flow Metrics Export</a>
            <ul>
            <li><a href="#event-indexed-filename"
            id="toc-event-indexed-filename">Event-indexed
            filename</a></li>
            <li><a href="#event-indexed-columns"
            id="toc-event-indexed-columns">Event-indexed
            columns</a></li>
            <li><a href="#calendar-indexed-filename"
            id="toc-calendar-indexed-filename">Calendar-indexed
            filename</a></li>
            <li><a href="#calendar-indexed-columns"
            id="toc-calendar-indexed-columns">Calendar-indexed
            columns</a></li>
            </ul></li>
            <li><a href="#element-export" id="toc-element-export">8.2
            Element Export</a></li>
            </ul></li>
            <li><a href="#charts" id="toc-charts">9 Charts</a></li>
            <li><a href="#additional-examples"
            id="toc-additional-examples">10 Additional Examples</a>
            <ul>
            <li><a href="#calendar-indexed-weekly-reporting"
            id="toc-calendar-indexed-weekly-reporting">10.1
            Calendar-indexed weekly reporting</a></li>
            <li><a href="#export-only-run" id="toc-export-only-run">10.2
            Export-only run</a></li>
            </ul></li>
            </ul>
          </nav>
        </aside>
                <div class="doc-content">
          <h1 id="scope">1 Scope</h1>
          <p>This document is the reference for the
          <code>flow</code>/<code>samplepath</code> command-line
          interface. It defines:</p>
          <ul>
          <li>command invocation,</li>
          <li>option semantics,</li>
          <li>output layout, and</li>
          <li>CSV export schemas.</li>
          </ul>
          <p>For mathematical definitions and conceptual background, see
          <a href="../../articles/theory">Sample Path Theory</a>.</p>
          <p>For file-by-file chart interpretation, see <a
          href="../../articles/chart-reference">Chart Reference</a>.</p>
          <h1 id="invocation">2 Invocation</h1>
          <p>Use either script name:</p>
          <div class="sourceCode" id="cb1"><pre
          class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">flow</span> analyze <span class="op">&lt;</span>csv-file<span class="op">&gt;</span> <span class="pp">[</span><span class="ss">options</span><span class="pp">]</span></span></code></pre></div>
          <div class="sourceCode" id="cb2"><pre
          class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">samplepath</span> analyze <span class="op">&lt;</span>csv-file<span class="op">&gt;</span> <span class="pp">[</span><span class="ss">options</span><span class="pp">]</span></span></code></pre></div>
          <p>If you pass a CSV path directly, the CLI treats it as
          <code>analyze</code>.</p>
          <h1 id="analyze-command">3 Analyze Command</h1>
          <p><code>analyze</code> runs the full pipeline:</p>
          <ol type="1">
          <li>Parse and validate CLI arguments.</li>
          <li>Load CSV and apply filters.</li>
          <li>Compute finite-window metrics.</li>
          <li>Write exports (unless disabled).</li>
          <li>Render charts (unless <code>--export-only</code>).</li>
          </ol>
          <h2 id="example">3.1 Example</h2>
          <div class="sourceCode" id="cb3"><pre
          class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">flow</span> analyze events.csv <span class="dt">\</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--completed</span> <span class="dt">\</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--outlier-iqr</span> 1.5 <span class="dt">\</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--lambda-pctl</span> 99 <span class="dt">\</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--output-dir</span> charts <span class="dt">\</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--scenario</span> weekly_report <span class="dt">\</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--clean</span></span></code></pre></div>
          <h1 id="input-contract">4 Input Contract</h1>
          <p>The input CSV must contain:</p>
          <ul>
          <li><code>id</code></li>
          <li><code>start_ts</code></li>
          <li><code>end_ts</code></li>
          </ul>
          <p>Optional columns are preserved in
          <code>elements.csv</code>. If present, <code>class</code> can
          be used with <code>--classes</code>.</p>
          <p>Column names can be remapped with:</p>
          <ul>
          <li><code>--start-column</code></li>
          <li><code>--end-column</code></li>
          </ul>
          <h1 id="output-layout">5 Output Layout</h1>
          <p>Given <code>events.csv</code>, outputs are written
          under:</p>
          <div class="sourceCode" id="cb4"><pre
          class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>output-dir<span class="op">&gt;</span>/</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">└──</span> events/</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="ex">└──</span> <span class="op">&lt;</span>scenario<span class="op">&gt;</span>/</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="ex">├──</span> input/</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        <span class="ex">├──</span> exports/</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="ex">├──</span> core/</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="ex">│</span>   └── panels/</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="ex">├──</span> convergence/</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        <span class="ex">│</span>   └── panels/</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        <span class="ex">├──</span> stability/</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="ex">│</span>   └── panels/</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        <span class="ex">└──</span> advanced/</span></code></pre></div>
          <p>Top-level summary charts are also written at
          <code>&lt;scenario&gt;/</code>.</p>
          <h1 id="analysis-modes">6 Analysis Modes</h1>
          <h2 id="event-indexed-mode-default">6.1 Event-Indexed Mode
          (default)</h2>
          <p>When <code>--sampling-frequency</code> is not set:</p>
          <ul>
          <li>metrics are evaluated at event timestamps,</li>
          <li>output export filename is
          <code>event_indexed_metrics.csv</code>.</li>
          </ul>
          <h2 id="calendar-indexed-mode">6.2 Calendar-Indexed Mode</h2>
          <p>When <code>--sampling-frequency</code> is set:</p>
          <ul>
          <li>the same cumulative metrics are evaluated at calendar
          boundaries,</li>
          <li>output export filename is
          <code>&lt;sampling_frequency&gt;_indexed_metrics.csv</code>.</li>
          </ul>
          <p><code>--anchor</code> configures boundary anchors:</p>
          <ul>
          <li>week: day name (for example <code>MON</code>),</li>
          <li>quarter/year: month name (for example
          <code>JAN</code>).</li>
          </ul>
          <p>For metric semantics and why this remains a sub-sampled
          cumulative view, see <a
          href="../../articles/theory#event-indexed-vs-calendar-indexed-views">Sample
          Path Theory</a>.</p>
          <h1 id="options">7 Options</h1>
          <h2 id="csv-parsing">7.1 CSV Parsing</h2>
          <ul>
          <li><code>csv</code> (positional): path to input CSV</li>
          <li><code>--delimiter</code>: optional delimiter override</li>
          <li><code>--start-column</code> (default
          <code>start_ts</code>)</li>
          <li><code>--end-column</code> (default
          <code>end_ts</code>)</li>
          <li><code>--date-format</code>: explicit datetime format
          string</li>
          <li><code>--day-first</code>: parse ambiguous dates as
          day-first</li>
          </ul>
          <h2 id="data-filters">7.2 Data Filters</h2>
          <ul>
          <li><code>--completed</code>: include only rows with
          <code>end_ts</code></li>
          <li><code>--incomplete</code>: include only rows without
          <code>end_ts</code></li>
          <li><code>--classes</code>: comma-separated class filter
          list</li>
          </ul>
          <p><code>--completed</code> and <code>--incomplete</code> are
          mutually exclusive.</p>
          <h2 id="outlier-trimming">7.3 Outlier Trimming</h2>
          <ul>
          <li><code>--outlier-hours</code>: drop items above fixed
          duration (hours)</li>
          <li><code>--outlier-pctl</code>: drop items above duration
          percentile</li>
          <li><code>--outlier-iqr</code>: drop items above
          <code>Q3 + K*IQR</code></li>
          <li><code>--outlier-iqr-two-sided</code>: also drop below
          <code>Q1 - K*IQR</code> when using IQR rule</li>
          </ul>
          <h2 id="lambda-fine-tuning">7.4 Lambda Fine Tuning</h2>
          <ul>
          <li><code>--lambda-pctl</code>: upper percentile clip for
          <code>Lambda(T)</code> chart axis</li>
          <li><code>--lambda-lower-pctl</code>: optional lower
          percentile clip</li>
          <li><code>--lambda-warmup</code>: warmup hours excluded from
          percentile estimation</li>
          </ul>
          <h2 id="convergence-thresholds">7.5 Convergence
          Thresholds</h2>
          <ul>
          <li><code>--epsilon</code>: relative error threshold used in
          convergence diagnostics</li>
          <li><code>--horizon-days</code>: initial days excluded from
          convergence assessment</li>
          </ul>
          <h2 id="output-configuration">7.6 Output Configuration</h2>
          <ul>
          <li><code>--output-dir</code> (default
          <code>charts</code>)</li>
          <li><code>--scenario</code> (default <code>latest</code>)</li>
          <li><code>--save-input</code> (enabled by default)</li>
          <li><code>--clean</code>: clear existing scenario outputs
          before writing</li>
          </ul>
          <h2 id="chart-configuration">7.7 Chart Configuration</h2>
          <ul>
          <li><code>--with-event-marks</code></li>
          <li><code>--show-derivations</code></li>
          <li><code>--chart-format {png,svg}</code></li>
          <li><code>--chart-dpi</code> (PNG only)</li>
          <li><code>--grid-lines</code> /
          <code>--no-grid-lines</code></li>
          <li><code>--sampling-frequency</code></li>
          <li><code>--anchor</code></li>
          </ul>
          <h2 id="export-configuration">7.8 Export Configuration</h2>
          <ul>
          <li><code>--export-data</code> /
          <code>--no-export-data</code></li>
          <li><code>--export-only</code></li>
          </ul>
          <p><code>--no-export-data</code> and
          <code>--export-only</code> cannot be combined.</p>
          <h1 id="csv-exports">8 CSV Exports</h1>
          <p>When exports are enabled, two files are written under
          <code>&lt;scenario&gt;/exports/</code>.</p>
          <h2 id="flow-metrics-export">8.1 Flow Metrics Export</h2>
          <h3 id="event-indexed-filename">Event-indexed filename</h3>
          <p><code>event_indexed_metrics.csv</code></p>
          <h3 id="event-indexed-columns">Event-indexed columns</h3>
          <table>
          <thead>
          <tr>
          <th>Column</th>
          <th>Meaning</th>
          </tr>
          </thead>
          <tbody>
          <tr>
          <td><code>timestamp</code></td>
          <td>event time</td>
          </tr>
          <tr>
          <td><code>element_id</code></td>
          <td>resolved element ID(s) at timestamp</td>
          </tr>
          <tr>
          <td><code>event_type</code></td>
          <td><code>A</code>, <code>D</code>, <code>A/D</code>, or
          <code>-</code></td>
          </tr>
          <tr>
          <td><code>A(T)</code></td>
          <td>cumulative arrivals</td>
          </tr>
          <tr>
          <td><code>D(T)</code></td>
          <td>cumulative departures</td>
          </tr>
          <tr>
          <td><code>N(t)</code></td>
          <td>instantaneous WIP</td>
          </tr>
          <tr>
          <td><code>H(T)</code></td>
          <td>cumulative presence mass</td>
          </tr>
          <tr>
          <td><code>L(T)</code></td>
          <td>time-average presence</td>
          </tr>
          <tr>
          <td><code>Lambda(T)</code></td>
          <td>cumulative arrival rate</td>
          </tr>
          <tr>
          <td><code>Theta(T)</code></td>
          <td>cumulative departure rate</td>
          </tr>
          <tr>
          <td><code>w(T)</code></td>
          <td>residence time per arrival</td>
          </tr>
          <tr>
          <td><code>w'(T)</code></td>
          <td>residence time per departure</td>
          </tr>
          <tr>
          <td><code>W*(T)</code></td>
          <td>empirical mean sojourn of completed items</td>
          </tr>
          </tbody>
          </table>
          <h3 id="calendar-indexed-filename">Calendar-indexed
          filename</h3>
          <p><code>&lt;sampling_frequency&gt;_indexed_metrics.csv</code>
          (for example <code>week_indexed_metrics.csv</code>)</p>
          <h3 id="calendar-indexed-columns">Calendar-indexed
          columns</h3>
          <table>
          <thead>
          <tr>
          <th>Column</th>
          <th>Meaning</th>
          </tr>
          </thead>
          <tbody>
          <tr>
          <td><code>&lt;sampling_frequency&gt;</code></td>
          <td>calendar boundary timestamp</td>
          </tr>
          <tr>
          <td><code>A(T)</code></td>
          <td>cumulative arrivals</td>
          </tr>
          <tr>
          <td><code>D(T)</code></td>
          <td>cumulative departures</td>
          </tr>
          <tr>
          <td><code>N(T)</code></td>
          <td>WIP at boundary</td>
          </tr>
          <tr>
          <td><code>H(T)</code></td>
          <td>cumulative presence mass</td>
          </tr>
          <tr>
          <td><code>L(T)</code></td>
          <td>time-average presence</td>
          </tr>
          <tr>
          <td><code>Lambda(T)</code></td>
          <td>cumulative arrival rate</td>
          </tr>
          <tr>
          <td><code>Theta(T)</code></td>
          <td>cumulative departure rate</td>
          </tr>
          <tr>
          <td><code>w(T)</code></td>
          <td>residence time per arrival</td>
          </tr>
          <tr>
          <td><code>w'(T)</code></td>
          <td>residence time per departure</td>
          </tr>
          <tr>
          <td><code>W*(T)</code></td>
          <td>empirical mean sojourn of completed items</td>
          </tr>
          </tbody>
          </table>
          <h2 id="element-export">8.2 Element Export</h2>
          <p>Filename: <code>elements.csv</code></p>
          <p>Core columns:</p>
          <ul>
          <li><code>element_id</code> (renamed from input
          <code>id</code>)</li>
          <li><code>start_ts</code></li>
          <li><code>end_ts</code></li>
          <li>original passthrough input columns</li>
          <li><code>sojourn_time</code></li>
          <li><code>residence_time</code></li>
          </ul>
          <h1 id="charts">9 Charts</h1>
          <p>Generated chart files are documented in <a
          href="../../articles/chart-reference">Chart Reference</a>.</p>
          <h1 id="additional-examples">10 Additional Examples</h1>
          <h2 id="calendar-indexed-weekly-reporting">10.1
          Calendar-indexed weekly reporting</h2>
          <div class="sourceCode" id="cb5"><pre
          class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">flow</span> analyze events.csv <span class="dt">\</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--sampling-frequency</span> week <span class="dt">\</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--anchor</span> MON <span class="dt">\</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--scenario</span> weekly_monday</span></code></pre></div>
          <h2 id="export-only-run">10.2 Export-only run</h2>
          <div class="sourceCode" id="cb6"><pre
          class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">flow</span> analyze events.csv <span class="at">--export-only</span> <span class="at">--scenario</span> exports_only</span></code></pre></div>
        </div>
      </div>
            <footer id="presence-link" role="contentinfo">
        <a href="https://samplepath.pcalc.org" target="_blank" rel="noreferrer">The Sample Path Analysis Toolkit</a>
        <div style="margin-top: 0.35rem; font-size: 0.85rem; color: #555;">
          © 2025 Krishna Kumar. All rights reserved.
        </div>
      </footer>
    </div>
  </div>
</body>
</html>

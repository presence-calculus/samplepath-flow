---
title: <strong>Chart Reference</strong>
author: |
  <a href="https://github.com/presence-calculus/samplepath"><em>The Samplepath Analysis Toolkit</em></a>

document-root: ../..
header-image: $document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/arrival_departure_indicator_process.png

# Configure TOC
toc: true
toc-title: Contents
toc-depth: 3
# Configure section numbers
numberSections: true
sectionsDepth: 2
# Configure figures
figPrefix: Figure
# Configure citations
citations: false
---

# Sample Path Flow Metrics

This document is a catalog of charts generated by the sample path analysis toolkit.

Given an input sample path (an arrival/departure point process, as shown above), all
computations are deterministic. Every value depends only on event order and the elapsed
time between events on that path.

The charts are ordered by a canonical sample-path construction arc: each metric is
derived deterministically from prior metrics or directly from the sample path itself.

Each chart shows one or more metrics and their relationships to each other and to the
underlying events on the sample path. At any point in time, each metric value can be
traced to the _specific event(s)_ that produced it. That is what enables reliable
cause-and-effect analysis of flow-metric changes.

None of these calculations are statistical summaries, and none rely on probabilistic
assumptions. To repeat: given the input sample path, every value is fully determined.

Another key feature: canonical sample path flow metrics are indexed by _events_ on the
sample path. Calendar-indexed views are derived samples of the same event-resolved
calculations.
For theory and
formal definitions behind why this matters, see [Sample Path Theory]($document-root/articles/theory).

For CLI options and output contracts, see [Command Line Reference]($document-root/articles/cli).

# Notational Conventions

## Instantaneous vs cumulative values

- All charts are defined over a finite observation horizon of length
  $T_{\max}$.

- Lower-case $t$ denotes *instantaneous* time.

  For a fixed horizon $T \in (0,\,T_{\max}]$, the within-window time variable
  $t$ satisfies $0 \le t \le T$. Functions of $t$ (such as $N(t)$) denote
  instantaneous sample-path values at time $t$.

- Upper-case $T$ denotes a *prefix horizon*.

  Functions of $T$ are deterministic pathwise functionals over the prefix
  window. They represent _cumulative quantities_ or normalized quantities
  derived from them.

  For each $T$, we consider the prefix window $[0,\,T]$. Endpoint quantities
  such as $F(T)$ are values at $t=T$ for that window, and as $T$ varies over
  $(0,\,T_{\max}]$, these endpoint values form the trajectory
  $T \mapsto F(T)$.

All of these are deterministic, pathwise calculations (definite integrals,
discrete sums, and finite-window normalizations) and should not be confused
with statistical measures.

## Timescales

All charts use continuous time on the x-axis.

- In event-indexed views, points are evaluated at exact event timestamps from the
  input sample path.
- In calendar-indexed views, points are evaluated at calendar boundaries, but values
  are still computed from the same underlying event-resolved pathwise calculations.

Internally, durations are measured in seconds and then durations and rates are converted automatically
to a consistent scale suitable for human-friendly display. This automatic scaling of units happens _on the y-axis only_;
the x-axis remains continuous time.

Calendar indexing is simply a coarser *sampling grid* over _metrics_ computed from the
event-resolved sample path at the input granularity. We do not pre-aggregate events into calendar buckets and then
compute flow metrics from those aggregates, like other flow metrics tools (incorrectly) do.


# The Presence Invariant Charts

The Presence Invariant is the finite-horizon form of Littleâ€™s Law.

$$
\begin{aligned}
L(T) &= \Lambda(T)\,w(T) = \Theta(T)\,w'(T)
\end{aligned}
$$

For the full derivation context and interpretation, refer to [Sample Path Theory: Presence Invariant]($document-root/articles/theory#presence-invariant).

The quantities in this law are the finite horizon equivalents of the quantities in the familiar steady state view of Little's Law,
But unlike the steady state version the presence invariant _holds unconditionally at all times_.

This document shows the step-by-step derivation of each quantity in the invariant and visualizes each component directly on the sample path. The charts are presented in a canonical order starting with the input sample path. Each chart depends on one more more metrics that we computed in an earlier chart. All calculations are deterministic.

Review the theory doc and use it as a cross-reference when reviewing the charts below. The ideas here are relatively straightforward if you spend a little bit of time carefully reading, understanding and reviewing what each chart means and the sequence of derivations.



| Chart                                              | Name                             | Formula                                | Units |
|----------------------------------------------------|----------------------------------|----------------------------------------| --- |
| [Point Process](#chart-01-point-process)           | Sample Path                      | Input event stream                     | N/A |
| [A(T)](#chart-02-arrivals-a)                       | Cumulative Arrivals              | $A(T)=\sum \text{arrivals in }[0,T]$   | Elem |
| [D(T)](#chart-03-departures-d)                     | Cumulative Departures            | $D(T)=\sum \text{departures in }[0,T]$ | Elem |
| [CFD](#chart-04-cfd)                               | Cumulative Flow Diagram          |                                        | N/A |
| [N(t)](#chart-05-sample-path-n)                    | Instantaneous Process State      | $N(t)=A(T)-D(T)$                       | Elem |
| [H(T)](#chart-06-presence-mass-h)                  | Cumulative Presence Mass         | $H(T)=\int_0^T N(t)\,dt$               | Elem-Time |
| [L(T)](#chart-07-time-average-l)                   | (Time) Average State             | $L(T)=H(T)/T$                          | Elem |
| [$\Lambda(T)$](#chart-08-arrival-rate-lambda)      | Arrival Rate                     | $\Lambda(T)=A(T)/T$                    | Elem/Time |
| [w(T)](#chart-09-residence-w)                      | Residence Time per Arrival       | $w(T)=H(T)/A(T)$                       | Time |
| [Arrival Invariant](#chart-10-arrival-invariant)   | Arrivals Focused Invariant       | $L(T)=\Lambda(T)\cdot w(T)$            | Elem |
| [Arrival Stack](#chart-11-arrival-stack)           | Arrival Focused Flow Dashboard   | $N(t), L(T), \Lambda(T), w(T)$         | N/A |
| [$\Theta(T)$](#chart-12-departure-rate-theta)      | Departure Rate                   | $\Theta(T)=D(T)/T$                     | Elem/Time |
| [w'(T)](#chart-13-residence-w-prime)               | Residence Time per Departure     | $w'(T)=H(T)/D(T)$                      | Time |
| [Departure Invariant](#chart-14-departure-invariant) | Departures Focused Invariant     | $N(t), L(T), \Theta(T), w'(T)$         | Elem |
| [Departure Stack](#chart-15-departure-stack)       | Departure Focused Flow Dashboard | $L(T)=\Theta(T)\cdot w'(T)$            | N/A |



## Point Process - Event Stream {#chart-01-point-process}

**Derivation:** N/A (input event stream).

**Unit:** N/A.

Builds from the event log itself: this is the base marked-point-process view that all
subsequent cumulative quantities depend on.

**Output file:** `core/panels/arrival_departure_indicator_process.png`

`with-events`

![Point Process (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/arrival_departure_indicator_process.png)

<details>
<summary>No-events version</summary>

![Point Process (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/arrival_departure_indicator_process.png)

</details>

## A(T) - Cumulative Arrivals {#chart-02-arrivals-a}

**Derivation:** $A(T)=\sum \text{arrivals in }[0,T]$.

**Unit:** Elements.

Builds on Step 1 by accumulating arrival marks over time into cumulative arrivals.

**Output file:** `core/panels/cumulative_arrivals_A.png`

`with-events`

![A(T) cumulative arrivals (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/cumulative_arrivals_A.png)

<details>
<summary>No-events version</summary>

![A(T) cumulative arrivals (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/cumulative_arrivals_A.png)

</details>

## D(T) - Cumulative Departures {#chart-03-departures-d}

**Derivation:** $D(T)=\sum \text{departures in }[0,T]$.

**Unit:** Elements.

Builds on Step 2 by accumulating departure marks, giving the second cumulative boundary
needed for flow geometry.

**Output file:** `core/panels/cumulative_departures_D.png`

`with-events`

![D(T) cumulative departures (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/cumulative_departures_D.png)

<details>
<summary>No-events version</summary>

![D(T) cumulative departures (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/cumulative_departures_D.png)

</details>

## CFD - Cumulative Flow Diagram {#chart-04-cfd}

**Derivation:** $N(t)=A(T)-D(T)$.

**Unit:** Elements.

Builds on Steps 2 and 3 by placing $A(T)$ and $D(T)$ together; the vertical gap becomes
instantaneous state and the enclosed area motivates presence mass.

**Output file:** `core/panels/cumulative_flow_diagram.png`

`with-events`

![CFD (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/cumulative_flow_diagram.png)

<details>
<summary>No-events version</summary>

![CFD (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/cumulative_flow_diagram.png)

</details>

## N(t) - Process State {#chart-05-sample-path-n}

**Derivation:** $N(t)=A(T)-D(T)$.

**Unit:** Elements.

Builds on the CFD gap: $N(t)$ is the pointwise difference between cumulative arrivals and
cumulative departures.

**Output file:** `core/panels/sample_path_N.png`

`with-events`

![N(t) sample path (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/sample_path_N.png)

<details>
<summary>No-events version</summary>

![N(t) sample path (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/sample_path_N.png)

</details>

## H(T) - Presence Mass {#chart-06-presence-mass-h}

**Derivation:** $H(T)=\int_0^T N(t)\,dt$.

**Unit:** Elements-Time.

Builds on $N(t)$ by integrating it over elapsed time, producing cumulative presence mass.

**Output file:** `core/panels/cumulative_presence_mass_H.png`

`with-events`

![H(T) presence mass (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/cumulative_presence_mass_H.png)

<details>
<summary>No-events version</summary>

![H(T) presence mass (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/cumulative_presence_mass_H.png)

</details>

## L(T) - Time-Average Presence {#chart-07-time-average-l}

**Derivation:** $L(T)=H(T)/T$.

**Unit:** Elements.

Builds on $H(T)$ by normalizing by elapsed time, yielding time-average presence.

**Output file:** `core/panels/time_average_N_L.png`

`with-events`

![L(T) time average (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/time_average_N_L.png)

<details>
<summary>No-events version</summary>

![L(T) time average (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/time_average_N_L.png)

</details>

## $\Lambda(T)$ - Arrival Rate {#chart-08-arrival-rate-lambda}

**Derivation:** $\Lambda(T)=A(T)/T$.

**Unit:** Elements/Time.

Builds on cumulative arrivals by converting counts to elapsed-time-normalized arrival
rate.

**Output file:** `core/panels/cumulative_arrival_rate_Lambda.png`

`with-events`

![Lambda(T) arrival rate (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/cumulative_arrival_rate_Lambda.png)

<details>
<summary>No-events version</summary>

![Lambda(T) arrival rate (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/cumulative_arrival_rate_Lambda.png)

</details>

## w(T) - Residence per Arrival {#chart-09-residence-w}

**Derivation:** $w(T)=H(T)/A(T)$.

**Unit:** Time.

Builds on $H(T)$ and $A(T)$ by expressing accumulated presence per arrival as average
residence per arrival.

**Output file:** `core/panels/average_residence_time_w.png`

`with-events`

![w(T) residence per arrival (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/average_residence_time_w.png)

<details>
<summary>No-events version</summary>

![w(T) residence per arrival (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/average_residence_time_w.png)

</details>

## $L(T)=\Lambda(T)\cdot w(T)$ Invariant - Arrival Invariant {#chart-10-arrival-invariant}

**Derivation:** $L(T)=\Lambda(T)\cdot w(T)$.

**Unit:** Elements.

Builds on Steps 7-9a by verifying the finite-window arrival-side invariant at each
observation point.

**Output file:** `core/panels/littles_law_invariant.png`

`with-events`

![Arrival invariant (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/littles_law_invariant.png)

<details>
<summary>No-events version</summary>

![Arrival invariant (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/littles_law_invariant.png)

</details>

## Arrival Stack - Arrival Dashboard {#chart-11-arrival-stack}

**Derivation:** $L(T)=\Lambda(T)\cdot w(T)$.

**Unit:** Mixed (Elements, Elements/Time, Time).

Builds on Steps 5, 7, 8, and 9a by presenting the arrival-side state, average, rate, and
residence components on one aligned dashboard.

**Output file:** `sample_path_flow_metrics.png`

`with-events`

![Arrival stack (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/sample_path_flow_metrics.png)

<details>
<summary>No-events version</summary>

![Arrival stack (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/sample_path_flow_metrics.png)

</details>

## $\Theta(T)$ - Departure Rate {#chart-12-departure-rate-theta}

**Derivation:** $\Theta(T)=D(T)/T$.

**Unit:** Elements/Time.

Builds from the departure count path by converting cumulative departures to
elapsed-time-normalized departure rate.

**Output file:** `core/panels/cumulative_departure_rate_Theta.png`

`with-events`

![Theta(T) departure rate (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/cumulative_departure_rate_Theta.png)

<details>
<summary>No-events version</summary>

![Theta(T) departure rate (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/cumulative_departure_rate_Theta.png)

</details>

## w'(T) - Residence per Departure {#chart-13-residence-w-prime}

**Derivation:** $w'(T)=H(T)/D(T)$.

**Unit:** Time.

Builds on $H(T)$ and $D(T)$ by expressing accumulated presence per departure.

**Output file:** `core/panels/average_residence_time_w_prime.png`

`with-events`

![w'(T) residence per departure (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/average_residence_time_w_prime.png)

<details>
<summary>No-events version</summary>

![w'(T) residence per departure (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/average_residence_time_w_prime.png)

</details>

## $L(T)=\Theta(T)\cdot w'(T)$ Invariant - Departure Invariant {#chart-14-departure-invariant}

**Derivation:** $L(T)=\Theta(T)\cdot w'(T)$.

**Unit:** Elements.

Builds on Steps 7, 11, and 12 by verifying $L(T)=\Theta(T)\cdot w'(T)$ pointwise.

**Output file:** `core/panels/departure_littles_law_invariant.png`

`with-events`

![Departure invariant (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/panels/departure_littles_law_invariant.png)

<details>
<summary>No-events version</summary>

![Departure invariant (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/panels/departure_littles_law_invariant.png)

</details>

## Departure Focused Stack - Departure Dashboard {#chart-15-departure-stack}

**Derivation:** $L(T)=\Theta(T)\cdot w'(T)$.

**Unit:** Mixed (Elements, Elements/Time, Time).

Builds on Steps 5, 7, 11, and 12 by presenting the departure-side dashboard in aligned
panels.

**Output file:** `core/departure_flow_metrics.png`

`with-events`

![Departure stack (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/core/departure_flow_metrics.png)

<details>
<summary>No-events version</summary>

![Departure stack (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/core/departure_flow_metrics.png)

</details>

# Convergence and Stability

| Chart | Short Name | Formula | Units |
| --- | --- | --- | --- |
| [$\Lambda(T)$-$\Theta(T)$ Rate Convergence](#chart-16-arrival-departure-rate-convergence) | Rate Convergence | $\Lambda(T)=A(T)/T$ vs $\Theta(T)=D(T)/T$ | Elem/Time |
| [Process Time Convergence](#chart-17-process-time-convergence) | Time Convergence | $w(T)=H(T)/A(T)$ vs $W^*(t)$ | Time |
| [Top-Level Convergence $L(T)$ vs $\lambda^*(t)\cdot W^*(t)$](#chart-20-sample-path-convergence) | Top-Level Convergence | $L(T)$ vs $\lambda^*(t)\cdot W^*(t)$ | Elem |




## $\Lambda(T)$-$\Theta(T)$ Rate Convergence - Rate Convergence {#chart-16-arrival-departure-rate-convergence}

**Derivation:** $\Lambda(T)=A(T)/T$ vs $\Theta(T)=D(T)/T$.

**Unit:** Elements/Time.

Builds from Steps 8 and 11 by directly comparing cumulative arrival and departure rate
trajectories.

**Output file:** `convergence/panels/arrival_departure_rate_convergence.png`

`no-events`

![Arrival-departure rate convergence (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/convergence/panels/arrival_departure_rate_convergence.png)

<details>
<summary>With-events version</summary>

![Arrival-departure rate convergence (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/convergence/panels/arrival_departure_rate_convergence.png)

</details>

## Process Time Convergence - Time Convergence {#chart-17-process-time-convergence}

**Derivation:** $w(T)=H(T)/A(T)$ vs $W^*(t)$.

**Unit:** Time.

Builds from Step 9a by comparing finite-window residence behavior to empirical
process-time behavior.

**Output file:** `convergence/panels/process_time_convergence.png`

`no-events`

![Process time convergence (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/convergence/panels/process_time_convergence.png)

<details>
<summary>With-events version</summary>

![Process time convergence (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/convergence/panels/process_time_convergence.png)

</details>

## Top-Level Convergence $L(T)$ vs $\lambda^*(t)\cdot W^*(t)$ {#chart-20-sample-path-convergence}

**Derivation:** $L(T)$ vs $\lambda^*(t)\cdot W^*(t)$.

**Unit:** Elements.

Builds on the full chain by giving a top-level convergence diagnostic for the
finite-window Little's Law relation over the observation horizon.

**Output file:** `sample_path_convergence.png`

`no-events`

![Sample path convergence (no-events)]($document-root/articles/chart-reference/chart_reference_small/no-events/sample_path_convergence.png)

<details>
<summary>With-events version</summary>

![Sample path convergence (with-events)]($document-root/articles/chart-reference/chart_reference_small/with-events/sample_path_convergence.png)

</details>
